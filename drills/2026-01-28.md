# Ruby/Rails ドリル復習 - 2026-01-28

## 第1問：Ruby文法・メソッド

**問題：**
```ruby
value = "abc"

case value
when /a/
  puts "A"
when String
  puts "S"
else
  puts "E"
end
```

**選択肢：**
- A) `A`
- B) `S`
- C) `E`
- D) `A` と `S` の両方が出力される

**正解：** A

**解説：**
Rubyの `case` 文は上から順に `when` 節を評価し、最初に一致した（`===` 演算子が真を返した）節だけを実行します。この場合、`/a/` が最初に一致するため、"A" が出力されます。

**公式リファレンス:**
- [制御構造 - case (Ruby 3.3 リファレンスマニュアル)](https://docs.ruby-lang.org/ja/latest/doc/spec=2fcontrol.html#case)

---

## 第2問：Rails規約・ヘルパー

**問題：**
Railsの `config/routes.rb` で `resource :profile` と定義されたルートがある場合、生成されるURLヘルパーとして正しいものはどれですか？

**選択肢：**
- A) `profiles_path`
- B) `profile_path`
- C) `edit_profiles_path`
- D) `profile_index_path`

**正解：** B

**解説：**
`resource` (単数形) を使うと、単数リソースとして定義され、パスヘルパーも `profile_path` のようになります（複数形の `s` がつきません）。

**公式リファレンス:**
- [Rails のルーティング - 単数リソース | Rails ガイド](https://railsguides.jp/routing.html#%E5%8D%98%E6%95%B0%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9)

---

## 第3問：よくあるミス・落とし穴

**問題：**
Railsのコントローラにおいて、リクエストが「Ajax（JavaScript）」経由かどうかで処理を分けたい場合、使用するメソッドはどれですか？

**選択肢：**
- A) `request.xhr?`
- B) `params[:ajax]`
- C) `response.is_ajax?`
- D) `request.format.js?`

**正解：** A

**解説：**
リクエストがAjax（XMLHttpRequest）経由かどうかを判定するには `request.xhr?` メソッドを使用します。ただし、Rails 5.1以降ではこの判定方法に依存しない設計が推奨される傾向にあります。

**公式リファレンス:**
- [ActionDispatch::Request#xhr? (Rails API)](https://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-xhr-3F)

---

## 結果

**正解数：** 2/3

**今日のポイント：**
1. `case` 文は最初に一致した `when` 節のみ実行される。
2. 単数リソース (`resource`) のヘルパーは単数形になる。
3. Ajax判定には `request.xhr?` を使用する。
