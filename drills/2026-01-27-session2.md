# Ruby/Rails ドリル復習 - 2026-01-27 (Session 2)

## 第1問：Ruby文法・メソッド

**問題：**
Rubyの配列 `arr = [1, 2, 3]` に対して、以下の操作を行った際、 `arr` の中身が `[1, 2, 3, 4]` に変化するものはどれですか？（破壊的変更を伴うものを選んでください）

**選択肢：**
- A) `arr + [4]`
- B) `arr.concat([4])`
- C) `arr.map { |n| n == 3 ? [3, 4] : n }.flatten`
- D) `arr.compact`

**正解：** B

**解説：**
`concat` メソッドは、引数で渡された配列を自身の末尾に破壊的に連結します。

**公式リファレンス:**
- [Array#concat (Ruby 3.3 リファレンスマニュアル)](https://docs.ruby-lang.org/ja/latest/method/Array/i/concat.html)

---

## 第2問：Rails規約・ヘルパー

**問題：**
RailsのERBテンプレートで、HTMLエスケープを行わずに文字列をそのまま出力したい場合に使用するメソッドはどれですか？

**選択肢：**
- A) `raw(text)`
- B) `escape(text)`
- C) `h(text)`
- D) `sanitize(text)`

**正解：** A

**解説：**
`raw` メソッドを使うことで、HTMLエスケープを無効にして文字列をそのまま出力できます。`sanitize` は許可されたタグのみを許可するクリーニングメソッドです。

**公式リファレンス:**
- [安全なHTMLを出力する | Rails ガイド](https://railsguides.jp/active_support_core_extensions.html#html-safe)

---

## 第3問：よくあるミス・落とし穴

**問題：**
Railsのマイグレーションで、既存のテーブルに新しいカラムを追加するコマンドとして最も適切なものはどれですか？

**選択肢：**
- A) `rails generate migration AddColumnToUsers name:string`
- B) `rails generate migration AddNameToUsers name:string`
- C) `rails generate migration UpdateUsers name:string`
- D) `rails generate migration NewField name:string`

**正解：** B

**解説：**
Railsのマイグレーション生成コマンドでは、`Add[カラム名]To[テーブル名]` という形式にすると、自動的に `add_column` のコードを生成してくれます。`AddColumnToUsers` でも動作はしますが、慣習的には具体的なカラム名を含める B が推奨されます。

**公式リファレンス:**
- [Active Record マイグレーション - 単独のマイグレーションを作成する | Rails ガイド](https://railsguides.jp/active_record_migrations.html#%E5%8D%98%E7%8B%AC%E3%81%AE%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B)

---

## 結果

**正解数：** 2/3

**今日のポイント：**
1. `Array#concat` は破壊的に配列を連結する。
2. HTMLエスケープせずに表示するには `raw` を使う。
3. マイグレーション生成は `AddXXXToYYY` の形式が便利。
